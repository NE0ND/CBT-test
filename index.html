<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ujian Online</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f2f2f2;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
    }
    .container {
      background: white;
      margin-top: 30px;
      padding: 20px;
      border-radius: 10px;
      width: 90%;
      max-width: 500px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h2 {
      text-align: center;
    }
    label {
      display: block;
      margin-top: 15px;
    }
    input[type="text"] {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      box-sizing: border-box;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    button {
      width: 100%;
      padding: 10px;
      margin-top: 20px;
      background-color: #2196F3;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
    }
    .question {
      margin-top: 20px;
    }
    .question label {
      margin-bottom: 5px;
    }
    .score-page {
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="container" id="loginPage">
    <h2>Login Ujian</h2>
    <label>Nama:</label>
    <input type="text" id="nama">
    <label>Password:</label>
    <input type="text" id="password">
    <button onclick="startExam()">Mulai</button>
  </div>

  <div class="container" id="examPage" style="display:none">
    <h2>Soal Ujian</h2>
    <form id="examForm"></form>
    <button onclick="submitExam()">Selesai</button>
  </div>

  <div class="container" id="scorePage" style="display:none">
    <div class="score-page">
      <h2>Skor Anda:</h2>
      <p id="score"></p>
      <button onclick="location.reload()">Ulangi Tes</button>
    </div>
  </div>

  <script>
    const questions = [
      { q: "Barisan 16, p, 4, q, ..... merupakan barisan aritmetika. Jumlah suku ke-6 dan suku ke-8 barisan tersebut sama dengan hasil kali suku ke-4 yakni.....", a: "20" },
      { q: "Barisan 1, 2, y .... merupakan barisan geometri. Nilai 6 - y adalah", a: "2" },
      { q: "Diketahui terdapat penambahan biaya pengemasan sebesar Rp3.000,00 untuk setiap pengiriman. Jika Anggun ingin mengirim dua barang sekaligus dan satu barang terpisah, biaya termurah yang dikeluarkan Anggun adalah..", a: "32.500" },
      { q: "X^x = 2^2048, maka tentukan nilai x=...", a: "256" },
      { q: "f(x)=XÂ²+2x+4, jika f(4)maka...", a: "28" }
    ];

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    function startExam() {
      const nama = document.getElementById('nama').value;
      const nisn = document.getElementById('password').value;
      if (!nama || !password) return alert('Isi Nama dan Password!');

      document.getElementById('loginPage').style.display = 'none';
      document.getElementById('examPage').style.display = 'block';

      shuffle(questions);
      const form = document.getElementById('examForm');
      form.innerHTML = '';
      questions.forEach((q, i) => {
        const div = document.createElement('div');
        div.className = 'question';
        div.innerHTML = `
          <label>${i+1}. ${q.q}</label>
          <input type="text" name="q${i}">
        `;
        form.appendChild(div);
      });
    }

    function submitExam() {
      const inputs = document.querySelectorAll('#examForm input');
      let score = 0;
      inputs.forEach((input, i) => {
        if (input.value.trim().toLowerCase() === questions[i].a) score++;
      });
      document.getElementById('examPage').style.display = 'none';
      document.getElementById('scorePage').style.display = 'block';
      document.getElementById('score').innerText = `${score} dari ${questions.length}`;
    }

    // Anti-cheat deteksi split screen atau floating
    let focused = true;
    window.addEventListener('blur', () => {
      if (focused) {
        alert('Anda keluar dari ujian!');
        location.reload();
      }
    });
    window.addEventListener('focus', () => focused = true);
    window.addEventListener('visibilitychange', () => {
      if (document.hidden) {
        alert('Terjadi aktivitas mencurigakan!');
        location.reload();
      }
    });
  </script>
</body>
</html>
